var app=angular.module("and-loader",[]);app.factory("andLoader",["$http",function(t){var o,n,r=1,e=function(){o={processed:0,loaded:0,failed:0,total:0}},s=function(t){this.id=r++,this.tasks=[],this.todo=[],this.parent=t||this};return s.prototype.load=function(){var t=new s(this);return this.tasks.push(t),t},s.prototype.end=function(){return this.parent},s.prototype.processTasks=function(t){for(var o in this.tasks){var n=this.tasks[o];n._run(t)}},s.prototype.run=function(t){return o.processed=0,o.loaded=0,o.failed=0,n._run(t)},s.prototype._run=function(n){var r=this,e=0;for(var s in r.todo){var i=r.todo[s];t(i).then(function(t){o.loaded++,o.processed++,++e==r.todo.length&&r.processTasks(n),n&&n(o),t.config.cb&&t.config.cb(t)},function(t){o.failed++,o.processed++,++e==r.todo.length&&r.processTasks(n),n&&n(o),t.config.cb&&t.config.cb(t)})}return this},s.prototype.get=function(t,n){return this.todo.push({url:t,method:"GET",cb:n}),o.total++,this},s.prototype.post=function(t,n,r){return this.todo.push({url:t,method:"POST",data:n,cb:r}),o.total++,this},s.prototype.then=function(){return this.parent.load()},function(){return n=new s,e(),n}}]);