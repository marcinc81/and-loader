var app=angular.module("and-loader",[]);app.factory("andLoader",["$http",function(t){var o=1,n={processed:0,loaded:0,failed:0,total:0},r=function(t){this.id=o++,this.tasks=[],this.todo=[],this.parent=t||this};r.prototype.load=function(){var t=new r(this);return this.tasks.push(t),t},r.prototype.end=function(){return this.parent},r.prototype.processTasks=function(t){for(var o in this.tasks){var n=this.tasks[o];n._run(t)}},r.prototype.run=function(t){return s._run(t)},r.prototype._run=function(o){var r=this,s=0;for(var e in r.todo){var a=r.todo[e];t(a).then(function(t){n.loaded++,n.processed++,++s==r.todo.length&&r.processTasks(o),o&&o(n),t.config.cb&&t.config.cb(t)},function(t){n.failed++,n.processed++,++s==selg.todo.length&&r.processTasks(o),o&&o(n),t.config.cb&&t.config.cb(t)})}return this},r.prototype.get=function(t,o){return this.todo.push({url:t,method:"GET",cb:o}),n.total++,this},r.prototype.post=function(t,o,r){return this.todo.push({url:t,method:"POST",data:o,cb:r}),n.total++,this},r.prototype.then=function(){return this.parent.load()};var s=new r;return s}]);